(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{587:function(t,a){t.exports="data:image/png;base64,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"},653:function(t,a,e){"use strict";e.r(a);var r=e(17),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"foreword"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#foreword"}},[t._v("#")]),t._v(" Foreword")]),t._v(" "),r("p",[t._v("We have now going to talk about the starter of "),r("code",[t._v("React")]),t._v(" application. In this ariticle, we will finish the whole process of "),r("code",[t._v("render")]),t._v(", which is "),r("code",[t._v("ReactDOM.render")]),t._v(" here.")]),t._v(" "),r("h2",{attrs:{id:"create-fiber"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#create-fiber"}},[t._v("#")]),t._v(" Create Fiber")]),t._v(" "),r("p",[t._v("From the "),r("code",[t._v("Double Buffer")]),t._v(" article, we know that when we first time run the "),r("code",[t._v("ReactDOM.render")]),t._v(", "),r("code",[t._v("fiberRootNode")]),t._v(" and "),r("code",[t._v("rootFiber")]),t._v(" will be created. "),r("code",[t._v("fiberRootNode")]),t._v(" is the "),r("code",[t._v("root node")]),t._v(" of the whole application and "),r("code",[t._v("rootFiber")]),t._v(" is the "),r("code",[t._v("root node")]),t._v("of the render component tree.")]),t._v(" "),r("p",[t._v("This happen in the "),r("code",[t._v("legactRenderSubtreeIntoContainer")]),t._v(" method, which ia called after "),r("code",[t._v("ReactDOM.render")]),t._v(".")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// container means the second parameter of the ReactDOM.render")]),t._v("\nroot "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" container"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_reactRootContainer "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("legacyCreateRootFromDOMContainer")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  container"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  forceHydrate\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfiberRoot "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" root"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_internalRoot\n")])])]),r("p",[r("a",{attrs:{href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-dom/src/client/ReactDOMLegacy.js#L193",target:"_blank",rel:"noopener noreferrer"}},[t._v("You can check the source code from here."),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("In the "),r("code",[t._v("legacyCreateRootFromDOMContainer")]),t._v(" method, "),r("code",[t._v("fiberRootNote")]),t._v(" and "),r("code",[t._v("rootFiber")]),t._v(" will be create and connect by calling "),r("code",[t._v("createFiberRoot")]),t._v(" and initilize "),r("code",[t._v("updateQueue")]),t._v(".")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("createFiberRoot")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token parameter"}},[r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("containerInfo")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" RootTag"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hydrate")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hydrationCallbacks")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" SuspenseHydrationCallbacks")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FiberRoot "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create fiberRootNode")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("root")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FiberRoot "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FiberRootNode")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("containerInfo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tag"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hydrate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create rootFiber")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uninitializedFiber "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHostRootFiber")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// connect rootFiber and fiberRootNode")]),t._v("\n  root"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uninitializedFiber\n  uninitializedFiber"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" root\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// initialize updateQueue")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializeUpdateQueue")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uninitializedFiber"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" root\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("Based on the code above, we could fill up the conntection between "),r("code",[t._v("rootFiber")]),t._v(" and "),r("code",[t._v("fiberRootNode")]),t._v(".")]),t._v(" "),r("p",[r("img",{attrs:{src:e(587),alt:"connection of fiberRootNode and rootFiber"}})]),t._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberRoot.new.js#L97",target:"_blank",rel:"noopener noreferrer"}},[t._v("You cen check the source code from here."),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"create-update"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#create-update"}},[t._v("#")]),t._v(" Create Update")]),t._v(" "),r("p",[t._v("After the components have been initialized, we are waiting for the "),r("code",[t._v("update")]),t._v(", which happened in the "),r("code",[t._v("updateContainer")]),t._v(" method.")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateContainer")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token parameter"}},[r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("element")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ReactNodeList"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("container")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" OpaqueRoot"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("parentComponent")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("React$Component"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("any"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" any"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("callback")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("Function")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Lane "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create update")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" update "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUpdate")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventTime"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lane"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" suspenseConfig"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// update.payload is the component need to mount on the root node")]),t._v("\n  update"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("payload "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" element "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// callback is the third parameter of the ReactDOM.render")]),t._v("\n  callback "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" callback\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    update"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add update to the updateQueue")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("enqueueUpdate")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scheduke update")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduleUpdateOnFiber")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lane"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eventTime"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[r("a",{attrs:{href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberReconciler.new.js#L255",target:"_blank",rel:"noopener noreferrer"}},[t._v("You can find the complete source code of "),r("code",[t._v("updateContainer")]),t._v(" here."),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("You might find out that "),r("code",[t._v("update.payload = {element};")]),t._v(". This is what we have talked in the previous ariticle "),r("code",[t._v("Update")]),t._v(", for "),r("code",[t._v("HostRoot")]),t._v(", "),r("code",[t._v("payload")]),t._v(" is the first parameter of "),r("code",[t._v("ReactDOM.render")]),t._v(".")]),t._v(" "),r("h2",{attrs:{id:"workflow"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#workflow"}},[t._v("#")]),t._v(" Workflow")]),t._v(" "),r("p",[t._v("So far, we could find the workflow should be look like")]),t._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[t._v("create fiberRootNode, rootFiber and updateQueue "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("legacyCreateRootFromDOMContainer"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\ncreate Update object "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("updateContainer"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nfrom fiber to root "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("markUpdateLaneFromFiberToRoot"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nupdate schedule "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("ensureRootIsScheduled"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nrender "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("performSyncWorkOnRoot"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" or "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("performConcurrentWorkOnRoot"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\ncommit "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("commitRoot"),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);