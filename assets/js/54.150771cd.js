(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{641:function(e,t,a){"use strict";a.r(t);var r=a(17),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"foreword"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foreword"}},[e._v("#")]),e._v(" Foreword")]),e._v(" "),a("p",[e._v("We have implemented a simple "),a("code",[e._v("useState")]),e._v(" in tha last article for understanding the operational principle of "),a("code",[e._v("Hooks")]),e._v(".")]),e._v(" "),a("p",[e._v("In this article, we will focus on the data structure of the "),a("code",[e._v("Hooks")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"dispatcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dispatcher"}},[e._v("#")]),e._v(" dispatcher")]),e._v(" "),a("p",[e._v("We know that "),a("code",[e._v("isMount")]),e._v(" is used for indentified the "),a("code",[e._v("mount")]),e._v(" and "),a("code",[e._v("update")]),e._v(" from the last article.")]),e._v(" "),a("p",[e._v("In the real "),a("code",[e._v("Hooks")]),e._v(", the "),a("code",[e._v("hook")]),e._v(" when the component "),a("code",[e._v("mount")]),e._v(" or the "),a("code",[e._v("hook")]),e._v(" when the component "),a("code",[e._v("update")]),e._v(" come from different objects, which we named them "),a("code",[e._v("dispatcher")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Dispatcher when mount")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("HooksDispatcherOnMount")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Dispatcher "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useCallback")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useContext")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" readContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useImperativeHandle")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountImperativeHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useLayoutEffect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountLayoutEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useMemo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountMemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useReducer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountReducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useRef")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mountState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Dispatcher when update")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("HooksDispatcherOnUpdate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Dispatcher "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useCallback")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useContext")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" readContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useImperativeHandle")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateImperativeHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useLayoutEffect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateLayoutEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useMemo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateMemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useReducer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateReducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useRef")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" updateState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("As we can see here, the fucntion of the "),a("code",[e._v("hook")]),e._v(" called when "),a("code",[e._v("mount")]),e._v(" is different with the funtion of the "),a("code",[e._v("hook")]),e._v(" called when "),a("code",[e._v("update")]),e._v(".")]),e._v(" "),a("p",[e._v("Before "),a("code",[e._v("FunctionComponent")]),e._v(" "),a("code",[e._v("render")]),e._v(", "),a("code",[e._v("mount")]),e._v(" or "),a("code",[e._v("update")]),e._v(" will be judged by the different conditions of the "),a("code",[e._v("FunctionComponent")]),e._v(" corresponding fiber.")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[e._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("===")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("||")]),e._v(" current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("memoizedState "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("===")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),e._v("\n")])])]),a("p",[e._v("And assign the "),a("code",[e._v("dispatcher")]),e._v(" corresponding to the different cases to the "),a("code",[e._v("current")]),e._v(" property of the global variable "),a("code",[e._v("ReactCurrentDispatcher")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[e._v("ReactCurrentDispatcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n  current "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("===")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("||")]),e._v(" current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("memoizedState "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("===")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" HooksDispatcherOnMount\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" HooksDispatcherOnUpdate\n")])])]),a("p",[a("a",{attrs:{href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L409",target:"_blank",rel:"noopener noreferrer"}},[e._v("You can find these code from here."),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("So, when "),a("code",[e._v("FunctionComponent")]),e._v(" "),a("code",[e._v("render")]),e._v(", it will looking for the "),a("code",[e._v("hook")]),e._v(" from "),a("code",[e._v("ReactCurrentDispatcher.current")]),e._v(".")]),e._v(" "),a("p",[e._v("Different call stack context assgin different "),a("code",[e._v("dispatcher")]),e._v(" to the "),a("code",[e._v("ReactCurrentDispatcher.current")]),e._v(", and when "),a("code",[e._v("FunctionComponent")]),e._v(" "),a("code",[e._v("render")]),e._v(", the "),a("code",[e._v("hook")]),e._v(" called is different.")]),e._v(" "),a("blockquote",[a("p",[e._v("Besides these two "),a("code",[e._v("dispather")]),e._v(", "),a("a",{attrs:{href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L1775",target:"_blank",rel:"noopener noreferrer"}},[e._v("you can check the defination of other "),a("code",[e._v("dispatcher")]),e._v("."),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"scenario"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scenario"}},[e._v("#")]),e._v(" Scenario")]),e._v(" "),a("p",[e._v("When we got a wrong "),a("code",[e._v("hook")]),e._v(", like")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),a("p",[e._v("Right now, "),a("code",[e._v("ReactCurrentDispatcher.current")]),e._v(" points to the "),a("code",[e._v("ContextOnlyDispatcher")]),e._v(", so actually, "),a("code",[e._v("useState")]),e._v(" will call "),a("code",[e._v("throwInvalidHookError")]),e._v(" to throw an error.")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("ContextOnlyDispatcher")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Dispatcher "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useCallback")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" throwInvalidHookError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useContext")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" throwInvalidHookError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" throwInvalidHookError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useImperativeHandle")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" throwInvalidHookError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("useLayoutEffect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" throwInvalidHookError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L458",target:"_blank",rel:"noopener noreferrer"}},[e._v("You can find the source code from here."),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"data-structure-of-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-structure-of-hook"}},[e._v("#")]),e._v(" Data Structure of Hook")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("hook")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Hook "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("memoizedState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("baseState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("baseQueue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("queue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("next")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L546",target:"_blank",rel:"noopener noreferrer"}},[e._v("You can find the source code of creating "),a("code",[e._v("hook")]),e._v(" here."),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("Besides "),a("code",[e._v("memoizedState")]),e._v(", other properties are the same as the "),a("code",[e._v("updateQueue")]),e._v(" we have talked in the last article.")]),e._v(" "),a("h2",{attrs:{id:"memoizedstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#memoizedstate"}},[e._v("#")]),e._v(" memoizedState")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[e._v("Note: Both "),a("code",[e._v("hook")]),e._v(" and "),a("code",[e._v("FunctionComponent fiber")]),e._v(" have the "),a("code",[e._v("memoizedState")]),e._v(" property.")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("fiber.memoizedState")]),e._v(": Saved "),a("code",[e._v("Hooks")]),e._v(" chain table of the "),a("code",[e._v("FunctionComponent")]),e._v(" corresponding "),a("code",[e._v("fiber")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("hook.memeoizedState")]),e._v(": Saved "),a("code",[e._v("hook")]),e._v(" corresponding data in the "),a("code",[e._v("Hooks")]),e._v(" chain table.")])])]),a("p",[e._v("Differnet "),a("code",[e._v("hook")]),e._v("'s "),a("code",[e._v("memoizedState")]),e._v(" save different type of data.")]),e._v(" "),a("ul",[a("li",[e._v("useState: for "),a("code",[e._v("const [state, updateState] = useState(initialState)")]),e._v(", "),a("code",[e._v("memoizedState")]),e._v(" save the value of "),a("code",[e._v("state")]),e._v(".")]),e._v(" "),a("li",[e._v("useReducer: for "),a("code",[e._v("const [state, dispatch] = useReducer(reducer, {});")]),e._v(", "),a("code",[e._v("memoizedState")]),e._v(" save the value of "),a("code",[e._v("state")]),e._v(".")]),e._v(" "),a("li",[e._v("useEffect: "),a("code",[e._v("memoizedState")]),e._v(" save the "),a("code",[e._v("effect")]),e._v(" includings "),a("code",[e._v("useEffect callback function")]),e._v(" and "),a("code",[e._v("dependencies")]),e._v("'s chain table data structure. "),a("a",{attrs:{href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L1181",target:"_blank",rel:"noopener noreferrer"}},[e._v("You can find the create process of the "),a("code",[e._v("effect")]),e._v("."),a("OutboundLink")],1),e._v(" "),a("code",[e._v("effect")]),e._v(" chain table will save in the "),a("code",[e._v("fiber.updateQueue")]),e._v(".")]),e._v(" "),a("li",[e._v("useRef: for "),a("code",[e._v("useRef(1)")]),e._v(", "),a("code",[e._v("memoizedState")]),e._v(" save "),a("code",[e._v("{current: 1}")]),e._v(".")]),e._v(" "),a("li",[e._v("useMEmo: for "),a("code",[e._v("useMemo(callback, [depA])")]),e._v(", "),a("code",[e._v("memoizedState")]),e._v(" save "),a("code",[e._v("[callback(), depA]")]),e._v(".")]),e._v(" "),a("li",[e._v("useCallback: for "),a("code",[e._v("useCallback(callback, [depA])")]),e._v(", "),a("code",[e._v("memoizedState")]),e._v(" save "),a("code",[e._v("[callback, depA]")]),e._v(". Compare with "),a("code",[e._v("useMemo")]),e._v(", "),a("code",[e._v("useCallback")]),e._v(" save the "),a("code",[e._v("callback")]),e._v(" function itself, not the result of the "),a("code",[e._v("callback")]),e._v(".")])]),e._v(" "),a("p",[e._v("Some "),a("code",[e._v("hook")]),e._v(" does not have "),a("code",[e._v("memoizedState")]),e._v(", for example, "),a("code",[e._v("useContext")]),e._v(".")])])}),[],!1,null,null,null);t.default=s.exports}}]);